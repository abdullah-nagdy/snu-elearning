<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Suez National University E-Learning</title>

<!-- Font Awesome for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Favicon -->
<link rel="Favicon" type="image/png" href="images/logo.png">

<!-- PWA Manifest -->
<link rel="manifest" href="manifest.json">

<meta name="theme-color" content="#1877f2">
<style>
:root{
  --bg-color: #f5f5f5;
  --page-bg: #ffffff;
  --text-color: #111111;
  --muted-text: #444444;
  --nav-bg: #ffffff;
  --sidenav-bg: #f5f5f5;
  --link-bg-hover: #cce0ff;
  --link-bg-active: #99c2ff;
  --accent: #1877f2;
  --btn-bg: #99c2ff;
  --btn-bg-hover: #66a3ff;
  --footer-bg: #d0d0d0;
  --overlay: rgba(0,0,0,0.3);
  --border-color: rgba(0,0,0,0.06);
  --glass: rgba(255,255,255,0.6);
  --transition-fast: 180ms;
  --transition: 300ms;
}
.theme-dark { 
  --bg-color: #121212;
  --page-bg: #ffffff;
  --text-color: #b3b7c0;
  --muted-text: #8c8080;
  --nav-bg: #242526;
  --sidenav-bg: #1e1f21;
  --link-bg-hover: rgba(255,255,255,0.04);
  --link-bg-active: rgba(24,119,242,0.14);
  --accent: #1877f2;
  --btn-bg: rgba(24,119,242,0.18);
  --btn-bg-hover: rgba(24,119,242,0.26);
  --footer-bg: #141414;
  --overlay: rgba(0,0,0,0.55);
  --border-color: rgba(255,255,255,0.04);
  --glass: rgba(255,255,255,0.03);
}
.theme-colorful {
  --bg-color: #a0c3e1;
  --page-bg: #c97676;
  --text-color: #04263a;
  --muted-text: #33667a;
  --nav-bg: linear-gradient(90deg,#e053e0 0%, #7bd3d6 100%);
  --sidenav-bg: #f0fbff;
  --link-bg-hover: #d9f2ff;
  --link-bg-active: #a6e1ff;
  --accent: #0b77d6;
  --btn-bg: #0b77d6;
  --btn-bg-hover: #0665b8;
  --footer-bg: #054f7a;
  --overlay: rgba(0,0,0,0.25);
  --border-color: rgba(5,77,122,0.08);
  --glass: rgba(255,255,255,0.85);
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family: Inter, "Segoe UI", Roboto, Arial, sans-serif;
  background: var(--bg-color);
  color: var(--text-color);
  transition: background var(--transition), color var(--transition);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  padding-bottom: 70px;
}
a{color:inherit;text-decoration:none}
.small{font-size:13px;color:var(--muted-text)}

.navbar{
  position:fixed;top:0;left:0;right:0;height:70px;
  display:flex;align-items:center;justify-content:space-between;
  padding:0 18px;
  background: var(--nav-bg);
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
  border-bottom:1px solid var(--border-color);
  z-index:1200;
  transition: background var(--transition), box-shadow var(--transition);
}
.navbar-left{display:flex;align-items:center;gap:14px}
.hamburger{font-size:26px;cursor:pointer;user-select:none;padding:6px;border-radius:6px}
.hamburger:focus{outline:2px solid rgba(0,0,0,0.08)}
.logo img{width:42px;height:42px;border-radius:8px;object-fit:cover}
.navbar-center{font-weight:700;font-size:15px;color:var(--text-color);text-align:center;flex:1;user-select:none}
.navbar-right{display:flex;align-items:center;gap:12px}
#themeBtn{
  background:transparent;border:1px solid transparent;padding:6px 10px;border-radius:8px;cursor:pointer;
  display:flex;align-items:center;gap:8px;
  transition:background var(--transition);
}
#themeBtn:focus{outline:2px solid rgba(0,0,0,0.08)}
.theme-swatch{width:18px;height:12px;border-radius:4px;box-shadow:0 1px 2px rgba(0,0,0,0.08)}
.theme-menu{
  position:absolute;right:18px;top:70px;
  background: var(--page-bg);
  border-radius:10px;
  padding:10px;
  box-shadow:0 6px 18px rgba(0,0,0,0.12);
  width:210px;
  display:none;
  z-index:1300;
  transition:opacity var(--transition);
}
.theme-menu.show{display:block}
.theme-option{
  display:flex;align-items:center;gap:10px;padding:8px;border-radius:8px;cursor:pointer;
  transition:background var(--transition);
}
.theme-option:hover{background:var(--link-bg-hover)}
.theme-option .label{font-weight:600}
.theme-option .desc{font-size:12px;color:var(--muted-text)}

.sidenav{
  position:fixed;
  top:70px;
  left:0;
  height:calc(100% - 70px);
  width:0;
  overflow-y:auto;
  transition:width 0.3s;
  background: var(--sidenav-bg);
  padding-top:20px;
  z-index:1100;
  border-right:1px solid var(--border-color);
}
.sidenav-link{
  display:flex;align-items:center;gap:12px;padding:12px 18px;margin:6px;border-radius:8px;
  color:var(--text-color);cursor:pointer;transition:background var(--transition);
}
.sidenav-link i{min-width:18px;text-align:center}
.sidenav-link:hover{background:var(--link-bg-hover)}
.sidenav-link.active{background:var(--link-bg-active)}
.contact-dropdown{
  margin-left: 20px;
  display: flex;
  flex-direction: column;
  gap: 8px;
  max-height: 0;
  overflow: hidden;
  transition: max-height 0.3s ease;
}
#offlineProgress {
  transition: color 0.3s;
  white-space: nowrap;
}

.contact-dropdown a{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 14px;
  border-radius:8px;
  background:transparent;
  color: var(--text-color);
  transition:background var(--transition);
}
.contact-dropdown a:hover{
  background: var(--link-bg-hover);
}

#overlay{position:fixed;top:70px;left:0;width:100%;height:calc(100% - 70px);
  background:var(--overlay);display:none;z-index:1090;transition:opacity var(--transition)}

.content{margin-top:80px;padding:20px;display:flex;flex-direction:column;align-items:center}
.pdf-container{width:90%;height:80vh;position:relative;background:var(--page-bg);border-radius:10px;overflow:hidden;box-shadow:0 6px 20px rgba(2,8,23,0.06)}
.pdf-container iframe{width:100%;height:100%;border:0;display:block}
#openPdfBtn{
  display:none;
  margin:20px auto 0;
  padding:14px 22px;
  background:var(--accent);
  color:#fff;
  border-radius:10px;
  font-weight:700;
  text-align:center;
  text-decoration:none;
}

.home-background{width:100%;height:calc(100vh - 70px);display:flex;justify-content:center;align-items:center;
  background:url('images/background.jpg') center/cover no-repeat;color:var(--page-bg);text-shadow:0 4px 18px rgba(0,0,0,0.25);
  font-size:26px;font-weight:700}

.footer{position:fixed;bottom:0;left:0;right:0;height:auto;background:var(--footer-bg);display:flex;align-items:center;justify-content:center;color:var(--page-bg);padding:12px 0;flex-wrap:wrap;}
.footer a{color:inherit}

#fullscreenBtnNav{
  display:none;
  padding:8px 12px;
  border-radius:8px;
  border:0;
  cursor:pointer;
  font-weight:700;
  background:var(--btn-bg);
  color:var(--page-bg);
  transition:background var(--transition);
}
#fullscreenBtnNav:hover{background:var(--btn-bg-hover)}

.navbar, .sidenav, .footer, .pdf-container, .home-background, body { transition: background var(--transition), color var(--transition), border-color var(--transition) }

@media(max-width:900px){
  .navbar-center{display:none}
  .pdf-container{width:95%;height:70vh}
  .home-background{font-size:20px}
  .theme-menu{right:10px}
}
</style>
</head>
<body>

<div id="overlay" onclick="closeNav()"></div>

<div id="mySidenav" class="sidenav" aria-hidden="true">
  <div class="sidenav-link" onclick="goHome(this)"><i class="fa fa-house"></i><span>Home</span></div>
  <div class="sidenav-link" onclick="showPDF('pdfs/phys.pdf', this)"><i class="fa fa-book"></i><span>Physics 1</span></div>
  <div class="sidenav-link" onclick="showPDF('pdfs/Chemistry.pdf', this)"><i class="fa fa-book"></i><span>Engineering Chemistry</span></div>
  <div class="sidenav-link" onclick="showPDF('pdfs/drawing.pdf', this)"><i class="fa fa-book"></i><span>Engineering Drawing</span></div>
  <div class="sidenav-link" onclick="showPDF('pdfs/Mathematics.pdf', this)"><i class="fa fa-book"></i><span>Mathematics 1</span></div>
  <div class="sidenav-link" onclick="showPDF('pdfs/mechanics.pdf', this)"><i class="fa fa-book"></i><span>Mechanics 1</span></div>
  <div class="sidenav-link" onclick="showPDF('pdfs/English.pdf', this)"><i class="fa fa-book"></i><span>Engineering English</span></div>

  <div class="sidenav-link" onclick="toggleContactDropdown(this)"><i class="fa fa-phone"></i><span>Contact Us</span></div>
  <div class="contact-dropdown" id="contactDropdown">
    <a href="tel:+201021816035"><i class="fa fa-phone"></i> Call</a>
    <a href="https://wa.me/+201146539919" target="_blank"><i class="fab fa-whatsapp"></i> WhatsApp</a>
  </div>
</div>

<header class="navbar" role="banner">
  <div class="navbar-left">
    <button class="hamburger" aria-label="Toggle menu" onclick="toggleNav()" aria-expanded="false">&#9776;</button>
    <div class="logo"><img src="images/logo.jpg" alt="Logo"></div>
  </div>
  <div class="navbar-center" aria-hidden="false">Suez National University E-Learning</div>
  <div class="navbar-right">
    <button id="themeBtn" aria-haspopup="true" aria-expanded="false" onclick="toggleThemeMenu()" title="Theme">
      <span class="theme-swatch" id="currentSwatch" style="background:var(--accent)"></span>
      <span class="small">Theme</span>
      <i class="fa fa-caret-down" style="opacity:.8"></i>
    </button>

    <div id="themeMenu" class="theme-menu" role="menu" aria-label="Theme menu">
      <div class="theme-option" tabindex="0" onclick="setTheme('light')" onkeydown="if(event.key==='Enter')setTheme('light')">
        <div class="theme-swatch" style="background:#ffffff;border:1px solid #eee"></div>
        <div>
          <div class="label">Light / مشرق</div>
          <div class="desc">Default, bright and clean</div>
        </div>
      </div>
      <div id="offlineProgress" style="margin-left:10px; font-size:13px; color:var(--muted-text)">
  تحميل أوفلاين: 0%
</div>
      <div class="theme-option" tabindex="0" onclick="setTheme('dark')" onkeydown="if(event.key==='Enter')setTheme('dark')">
        <div class="theme-swatch" style="background:#242526;border:1px solid rgba(255,255,255,0.06)"></div>
        <div>
          <div class="label">Dark / مظلم</div>
          <div class="desc">Comfortable night view (Facebook-like)</div>
        </div>
      </div>
      <div class="theme-option" tabindex="0" onclick="setTheme('colorful')" onkeydown="if(event.key==='Enter')setTheme('colorful')">
        <div class="theme-swatch" style="background:linear-gradient(90deg,#87c6ff,#7bd3d6)"></div>
        <div>
          <div class="label">Colorful / ملون</div>
          <div class="desc">Elegant blue/teal accent</div>
        </div>
      </div>
    </div>

    <button id="fullscreenBtnNav" title="Fullscreen PDF" onclick="toggleFullscreen()">Fullscreen</button>
  </div>
</header>

<main>
  <section class="content" id="mainContent">
    <div id="homeContent" class="home-background">
      Welcome to the E-Learning Platform
    </div>

    <div id="pdfContent" class="pdf-container" style="display:none;">
      <iframe id="pdfViewer" src="" title="PDF Viewer"></iframe>
    </div>

    <a id="openPdfBtn" href="#" target="_blank">Open PDF</a>
  </section>
</main>

<footer class="footer" role="contentinfo">
  <div>Designed by Abdullah Mohamed. All rights reserved.</div>
  <div>
    <a href="tel:+201021816035" aria-label="Call"><i class="fa fa-phone"></i></a>
    <a href="https://wa.me/+201146539919" target="_blank" aria-label="WhatsApp"><i class="fab fa-whatsapp"></i></a>
  </div>
</footer>

<script>
  if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('service-worker.js')
      .then(() => console.log('Service Worker registered successfully'))
      .catch(err => console.log('Service Worker registration failed:', err));
  });
}


// Main JS functionality
const sidenav = document.getElementById('mySidenav');
const overlay = document.getElementById('overlay');
const pdfViewer = document.getElementById('pdfViewer');
const pdfContent = document.getElementById('pdfContent');
const homeContent = document.getElementById('homeContent');
const openPdfBtn = document.getElementById('openPdfBtn');
const fullscreenBtnNav = document.getElementById('fullscreenBtnNav');
const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);

function toggleNav(){ const opened = sidenav.style.width==='250px'; if(opened){sidenav.style.width='0';overlay.style.display='none'} else{sidenav.style.width='250px';overlay.style.display='block'}}
function closeNav(){sidenav.style.width='0';overlay.style.display='none'}
function showPDF(pdfLink, selectedDiv){
  document.querySelectorAll('.sidenav-link').forEach(n=>n.classList.remove('active'));
  if(selectedDiv) selectedDiv.classList.add('active');

  pdfContent.style.display='block';
  homeContent.style.display='none';

  fullscreenBtnNav.style.display = 'inline-block';

  if(isIOS){
    // على iOS، ما نعرضش iframe مباشرة، استخدم زر Open PDF
    pdfViewer.style.display='none';
    openPdfBtn.href = pdfLink;
    openPdfBtn.style.display='inline-block';
  } else {
    // على باقي الأجهزة
    pdfViewer.src = pdfLink;
    pdfViewer.style.display='block';
    openPdfBtn.style.display='none';
  }

  if(window.innerWidth<=900) closeNav();
}

function goHome(link){
  document.querySelectorAll('.sidenav-link').forEach(n=>n.classList.remove('active'));
  if(link) link.classList.add('active');
  pdfContent.style.display='none';
  homeContent.style.display='flex';
  openPdfBtn.style.display='none';
  fullscreenBtnNav.style.display='none';
}
function toggleFullscreen(){
  if(pdfContent.requestFullscreen) pdfContent.requestFullscreen();
  else if(pdfContent.webkitRequestFullscreen) pdfContent.webkitRequestFullscreen();
  else if(pdfContent.msRequestFullscreen) pdfContent.msRequestFullscreen();
}
function toggleThemeMenu(){ document.getElementById('themeMenu').classList.toggle('show'); }
function setTheme(mode){
  const currentSwatch = document.getElementById('currentSwatch');
  if(mode==='dark'){document.body.classList.remove('theme-colorful');document.body.classList.add('theme-dark');currentSwatch.style.background='#1877f2'}
  else if(mode==='colorful'){document.body.classList.remove('theme-dark');document.body.classList.add('theme-colorful');currentSwatch.style.background='linear-gradient(90deg,#87c6ff,#7bd3d6)'}
  else{document.body.classList.remove('theme-dark','theme-colorful');currentSwatch.style.background='#1877f2'}
  document.getElementById('themeMenu').classList.remove('show');
}
function toggleContactDropdown(elem){
  const dropdown = document.getElementById('contactDropdown');
  if(dropdown.style.maxHeight && dropdown.style.maxHeight!=='0px') dropdown.style.maxHeight='0';
  else dropdown.style.maxHeight=dropdown.scrollHeight+'px';
}
navigator.serviceWorker.addEventListener('message', event => {
  if(event.data.type === 'PROGRESS'){
    document.getElementById('offlineProgress').innerText = `تحميل أوفلاين: ${event.data.percent}%`;
  }
});
// عنصر النافبار لعرض نسبة التحميل
const cacheProgress = document.createElement('div');
cacheProgress.id = 'cacheProgress';
cacheProgress.style = 'position:fixed;top:70px;left:0;width:100%;height:4px;background:#ccc;';
document.body.appendChild(cacheProgress);

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js').then(reg => {
    console.log('SW registered');
  });

  navigator.serviceWorker.addEventListener('message', event => {
    if (event.data.type === 'CACHE_PROGRESS') {
      const progress = event.data.progress;
      cacheProgress.style.width = progress + '%';
      cacheProgress.style.background = 'linear-gradient(90deg, #1877f2 ' + progress + '%, #ccc ' + (100-progress) + '%)';
      if (progress === 100) {
        setTimeout(() => cacheProgress.remove(), 1000);
      }
    }
  });
}

</script>

</body>
</html>
